(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(c){if(c.ep)return;c.ep=!0;const l=o(c);fetch(c.href,l)}})();console.log("JS LOADED");alert("JS LOADED");let r={CARD_INDEX:0,CARD_PROGRESSION:null,CARD_NAME:null,CARD_SET:null,CARD_ELEMENT:document.querySelector(".card"),CASH_CARD_INDEX:null};const d={UNKNOWN:0,KNOWN:1,NEW_SET:2},T=["Everyone starts somewhere.","A first step forward.","Some progress is happening.","Youâ€™re getting familiar.","Making steady progress.","Halfway there.","Good progress.","Nice work.","Great job.","Almost perfect.","Perfect !"];let A=document.querySelector(".card-ui-wrapper");L(A,!0);let R=document.getElementById("open-folder-input"),D=document.getElementById("shuffle-card-btn"),g=document.getElementById("create-card-btn"),i={CARD_FILES:null,CARD_SET_LIST:[],FILES_CONTAINER_ELEMENT:document.querySelector(".card-list-container")};i.FILES_CONTAINER_ELEMENT.addEventListener("click",function(e){let t=e.target;t.classList.contains("card-template-item")&&a()===!1&&(r.CASH_CARD_INDEX=t.dataset.cardsetIndex,G(t.dataset.cardsetIndex))});function w(e){const t=[];for(let o=0;o<e.length;o++)t.push(o);for(let o=t.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[t[o],t[n]]=[t[n],t[o]]}return t}function O(e){let t=w(e),o=structuredClone(e);for(let n=0;n<e.length;n++)o[n]=e[t[n]];return o}function b(e){let t=[];for(let n=0;n<e.length;n++)e[n][1]===d.UNKNOWN&&t.push(e[n][0]);let o=[];for(let n=0;n<t.length;n++)o.push(r.CARD_SET[t[n]]);return o}let q=document.querySelector(".progress-bar");function _(e,t){let o=e*100/(t+1);q.style.width=`${o}%`}function k(){return r.CARD_SET!==null}function a(){return document.querySelector(".dim")!=null?document.querySelector(".dim.disappear")==null:document.querySelector(".dim")!=null}function E(){let e=document.querySelector(".dim");e.classList.add("disappear"),e.addEventListener("animationend",function(){e.remove()},{once:!0})}function L(e,t){t===!0?(e.style.visibility="hidden",e.classList.add("isHidden")):(e.style.visibility="visible",e.classList.remove("isHidden"))}function v(e){let t=Math.floor(e/10);return T[t]}function M(){let e=U.content.cloneNode(!0);const t=r.CARD_PROGRESSION.map(c=>c[1]).filter(c=>c==d.UNKNOWN).length,o=r.CARD_PROGRESSION.map(c=>c[1]).filter(c=>c==d.KNOWN).length,n=Math.round(o*100/(o+t));e.querySelector(".fails-num").textContent=t,e.querySelector(".success-num").textContent=o,e.querySelector(".card-num").textContent=r.CARD_SET.length,e.querySelector(".end-menu-support").textContent=v(n),n==100&&e.querySelector(".redo-fails-btn").style.setProperty("display","none"),e.querySelector(".end-menu-num").textContent=n,e.querySelector(".end-menu .progress-bar").style.width=`${n}%`,e.querySelector(".end-menu .progress-bar").style.setProperty("--fill-pourcentage",`${n}%`),e.querySelector(".redo-fails-btn").addEventListener("click",function(){E(),f(b(r.CARD_PROGRESSION),r.CARD_NAME)}),e.querySelector(".redo-btn").addEventListener("click",function(){E(),f(i.CARD_SET_LIST[r.CASH_CARD_INDEX].cards,r.CARD_NAME)}),document.querySelector(".card-screen").appendChild(e)}function K(e,t){r.CARD_PROGRESSION.push([e,t])}function B(){return r.CARD_INDEX>=r.CARD_SET.length}function u(e){K(r.CARD_INDEX,e),r.CARD_INDEX++,B()===!0?M():S(r.CARD_INDEX),_(r.CARD_INDEX,r.CARD_SET.length-1),p(e,r.CARD_NAME)}function x(){r.CARD_PROGRESSION.splice(r.CARD_PROGRESSION.length-1,1)}function h(e){if(r.CARD_INDEX<=0)return 0;r.CARD_INDEX--,S(r.CARD_INDEX),x(),_(r.CARD_INDEX,r.CARD_SET.length-1),p(e,r.CARD_NAME)}function m(e){a()==!1&&e.classList.toggle("flip")}r.CARD_ELEMENT.addEventListener("click",function(){m(this)});document.body.addEventListener("keydown",function(e){k()===!0&&(e.code==="Space"?a()===!1&&m(r.CARD_ELEMENT):e.code==="ArrowRight"?a()===!1&&u(d.KNOWN):e.code==="ArrowLeft"?a()===!1&&u(d.UNKNOWN):e.code==="Backspace"&&a()===!1&&h(d.UNKNOWN))});let W=document.getElementById("unknown-btn"),P=document.getElementById("known-btn"),X=document.getElementById("return-btn");W.addEventListener("click",function(){a()==!1&&u(d.UNKNOWN)});P.addEventListener("click",function(){a()==!1&&u(d.KNOWN)});X.addEventListener("click",function(){a()==!1&&h(d.UNKNOWN)});function F(){return document.querySelector(".flip")!=null}document.getElementById("card-template");const U=document.getElementById("finnish-screen");function p(e,t){let n=document.getElementById("card-animation").content.cloneNode(!0),c=n.querySelector(".transition-card"),l=n.querySelector(".transition-card-wrapper");e===d.KNOWN?(c.classList.add("card-known"),c.textContent="Know"):e===d.UNKNOWN?(c.classList.add("card-unknown"),c.textContent="Still Learning"):e===d.NEW_SET&&(c.classList.add("new-card-set"),c.textContent=`${t}`),l.addEventListener("animationend",function(){this.remove()},{once:!0}),document.querySelector(".card-container").appendChild(n)}function S(e){F()===!0&&(r.CARD_ELEMENT.style.transition="none",m(r.CARD_ELEMENT),r.CARD_ELEMENT.offsetHeight,r.CARD_ELEMENT.style.transition="transform 0.6s ease"),a()===!1&&(r.CARD_ELEMENT.querySelector(".card-front").textContent=r.CARD_SET[e].front,r.CARD_ELEMENT.querySelector(".card-back").textContent=r.CARD_SET[e].back)}function f(e,t){r.CARD_NAME=t,r.CARD_PROGRESSION=[],r.CARD_SET=e,r.CARD_INDEX=0,S(r.CARD_INDEX),_(r.CARD_INDEX,r.CARD_SET.length-1),p(d.NEW_SET,r.CARD_NAME)}function G(e){let t=i.CARD_SET_LIST[e];L(A,!1),f(t.cards,t.title)}function j(e){const t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(o),c=document.createElement("a");c.href=n,c.download=`${e.title}.json`,c.click(),URL.revokeObjectURL(n)}function H(){var n,c;const e=Array.from(document.querySelectorAll(".card-creation.new-card-input-container")).map(l=>{var N,y;const s=(N=l.querySelector(".new-card-input-front"))==null?void 0:N.value.trim(),C=(y=l.querySelector(".new-card-input-back"))==null?void 0:y.value.trim();return!s||!C?null:{front:s,back:C}}).filter(l=>l!==null),t=(n=document.getElementById("new-card-name-input"))==null?void 0:n.value,o=(c=document.getElementById("new-card-description-input"))==null?void 0:c.value;return{name:t,description:o,card_face_info:e}}function $(e){return{title:e.name,description:e.description,cards:e.card_face_info}}function I(e,t,o){let n=document.getElementById("cardset-template").content.cloneNode(!0);n.querySelector(".cardset-template-item-title").textContent=e.title,n.querySelector(".card-template-item").dataset.cardsetIndex=t,n.querySelector(".cardset-template-save-btn-wrapper").dataset.cardsetIndex=t,n.querySelector(".cardset-size-info").textContent=e.cards.length,o==!0?n.querySelector(".card-template-item").classList.add("unsaved"):n.querySelector(".card-template-item").classList.add("saved"),n.querySelector(".cardset-template-save-btn-wrapper").addEventListener("click",function(){const c=i.CARD_SET_LIST[this.dataset.cardsetIndex];j(c)}),i.FILES_CONTAINER_ELEMENT.appendChild(n)}function J(){let e=document.getElementById("card-creation-menu").content.cloneNode(!0),t=e.querySelector(".card-creation.add-card-btn");document.querySelector(".card-screen").appendChild(e),t.addEventListener("click",function(){let n=document.querySelector(".card-creation.input-container-cards"),c=document.getElementById("new-card-input").content.cloneNode(!0);c.querySelector(".card-creation.card-swicth-btn").addEventListener("click",function(){this.classList.toggle("swapped"),this.classList.remove("spin"),this.offsetWidth,this.classList.add("spin")}),n.prepend(c)});const o=document.getElementById("proceed-create-card-btn");o.addEventListener("click",function(){let n=H();if(n=$(n),n.title==""||n.description==""||n.cards=="")return console.error("null"),0;o.disabled=!0,i.CARD_SET_LIST.push(n),I(n,i.CARD_SET_LIST.length-1,!0),E()})}function z(){for(let e=0;e<i.CARD_SET_LIST.length;e++){let t=i.CARD_SET_LIST[e];I(t,e,!1),document.getElementById("cardset-template").content.cloneNode(!0)}}document.addEventListener("keydown",e=>{e.ctrlKey&&e.shiftKey&&e.key==="O"&&(e.preventDefault(),R.click())});R.addEventListener("change",async e=>{i.CARD_FILES=e.target.files,i.CARD_SET_LIST=[];for(const t of i.CARD_FILES)if(t.name.endsWith(".json")){const o=await t.text();i.CARD_SET_LIST.push(JSON.parse(o))}z()});D.addEventListener("click",function(){if(i.CARD_FILES!==null&&r.CARD_SET!==null&&a()===!1){let e=O(r.CARD_SET);f(e,"Shuffled")}});document.addEventListener("keydown",e=>{e.ctrlKey&&e.shiftKey&&e.key==="S"&&(e.preventDefault(),D.click())});g.addEventListener("click",function(){a()===!1&&J()});document.addEventListener("keydown",e=>{e.ctrlKey&&e.shiftKey&&e.key==="Q"&&(e.preventDefault(),g.click())});
